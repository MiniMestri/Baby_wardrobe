
<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        canvas.before:
            Color:
                rgba:  0.784, 0.902, 0.980, 1 
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: '[b]Inicio de Sesión[/b]'
            markup: True
            color: 0, 0, 0, 1
            font_size: 40

        TextInput:
            id: username
            hint_text: 'Nombre de usuario'
            multiline: False

        TextInput:
            id: password
            hint_text: 'Contraseña'
            password: True
            multiline: False

        Button:
            text: 'Iniciar Sesión'
            on_press: root.manager.login(username.text, password.text)

        Button:
            text: 'Registrarse'
            on_press: root.manager.current = 'register'

<RegisterScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        canvas.before:
            Color:
                rgba:  0.784, 0.902, 0.980, 1 
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: '[b]Registro[/b]'
            markup: True
            color: 0, 0, 0, 1
            font_size: 40

        TextInput:
            id: new_username
            hint_text: 'Nombre de usuario'
            multiline: False

        TextInput:
            id: new_password
            hint_text: 'Contraseña'
            password: True
            multiline: False

        Button:
            text: 'Registrar'
            on_press: root.manager.register(new_username.text, new_password.text)

        Button:
            text: 'Volver al Inicio de Sesión'
            on_press: root.manager.current = 'login'

<ImageButton@ButtonBehavior+Image>:

<HomeScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Blanco
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            font_size: '48sp'
            text: 'Notificaciones'
            color: 0, 0, 0, 1

        GridLayout:
            cols: 4
            rows: 4
            spacing: [5, 5]
            padding: [10, 10, 10, 10]
            canvas.before:
                Color:
                    rgba: 160/255, 205/255, 240/255, 1  # Blanco
                Rectangle:
                    pos: self.pos
                    size: self.size

            ImageButton:
                background_color: (200/255, 230/255, 250/255, 1)  
                source: app.get_image_path('boton_body.png')
                on_press: root.show_category('Body')
            ImageButton:
                background_color: (200/255, 230/255, 250/255, 1)
                source: app.get_image_path('boton_buzos.png')
                on_press: root.show_category('Buzos')
            ImageButton:
                background_color: (200/255, 230/255, 250/255, 1)
                source: app.get_image_path('boton_cubrepanales.png')
                on_press: root.show_category('Cubrepañales')
            ImageButton:
                background_color: (200/255, 230/255, 250/255, 1)
                source: app.get_image_path('boton_faldon.png')
                on_press: root.show_category('Vestidos')

            Label:
                text: '[b]BODY[/b]'
                markup: True
            Label:
                text: '[b]BUZOS[/b]'
                markup: True
            Label:
                text: '[b]CUBRE[/b]'
                markup: True
            Label:
                text: '[b]VESTIDOS[/b]'
                markup: True
            ImageButton:
                background_color: (200/255, 230/255, 250/255, 1)
                source: app.get_image_path('boton_jesusitos.png')
                on_press: root.show_category('Jesusitos')
            ImageButton:
                background_color: (200/255, 230/255, 250/255, 1)
                source: app.get_image_path('boton_pelele.png')
                on_press: root.show_category('Peleles')
            ImageButton:
                background_color: (200/255, 230/255, 250/255, 1)
                source: app.get_image_path('boton_petos.png')
                on_press: root.show_category('Petos')
            ImageButton:
                background_color: (200/255, 230/255, 250/255, 1)
                source: app.get_image_path('boton_ranitas.png')
                on_press: root.show_category('Ranitas')
            Label:
                text: '[b]JESUSITOS[/b]'
                markup: True
            Label:
                text: '[b]PELELES[/b]'
                markup: True
            Label:
                text: '[b]PETOS[/b]'
                markup: True
            Label:
                text: '[b]RANITAS[/b]'
                markup: True

        GridLayout:
            cols: 4
            rows: 1
            size_hint_y: None
            height: dp(50)
            padding: [10, 10, 10, 10]
            spacing: [10, 10]

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Blanco
                Rectangle:
                    pos: self.pos
                    size: self.size
            ImageButton:
                source: app.get_image_path('casa.png')
                on_press: root.manager.current = 'home'
            ImageButton:
                source: app.get_image_path('armario.png')
                on_press: root.manager.current = 'wardrobe'
            ImageButton:
                source: app.get_image_path('regla.png')
                on_press: root.manager.current = 'mesure'
            ImageButton:
                source: app.get_image_path('usuario.png')
                on_press: root.manager.current = 'account'

<CategoryDetailsScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba:  0.784, 0.902, 0.980, 1 
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: 'vertical'
            padding: [20, 20, 20, 20]
            spacing: 10

            Label:
                id: category_title
                font_size: '48sp'
                text: 'Categoría de ropa'
                color: 0, 0, 0, 1

            ScrollView:
                GridLayout:
                    id: category_grid
                    cols: 4
                    size_hint_y: None
                    height: self.minimum_height
                    row_default_height: '100dp'
                    row_force_default: True
                    spacing: [5, 5]
                    padding: [10, 10, 10, 10]

        GridLayout:
            cols: 4
            rows: 1
            size_hint_y: None
            height: dp(50)
            padding: [10, 10, 10, 10]
            spacing: [10, 10]

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Blanco
                Rectangle:
                    pos: self.pos
                    size: self.size
            ImageButton:
                source: app.get_image_path('casa.png')
                on_press: root.manager.current = 'home'
            ImageButton:
                source: app.get_image_path('armario.png')
                on_press: root.manager.current = 'wardrobe'
            ImageButton:
                source: app.get_image_path('regla.png')
                on_press: root.manager.current = 'mesure'
            ImageButton:
                source: app.get_image_path('usuario.png')
                on_press: root.manager.current = 'account'





<WardrobeScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba:  0.784, 0.902, 0.980, 1  # Fondo
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: 'vertical'
            padding: [20, 20, 20, 20]
            spacing: 10

            Label:
                text: '[b]Gestión de Armarios[/b]'
                markup: True
                color: 0, 0, 0, 1  # Color del texto
                font_size: '32sp'
                size_hint_y: None
                height: '50dp'

            ScrollView:
                GridLayout:
                    id: wardrobe_grid
                    cols: 1
                    spacing: 10
                    size_hint_y: None
                    height: self.minimum_height

        Widget:  # Este Widget actúa como un separador para evitar que el GridLayout herede el padding
            size_hint_y: None
            height: 0

        GridLayout:
            cols: 4
            rows: 1
            size_hint_y: None
            height: dp(50)
            padding: [10, 10, 10, 10]
            spacing: [10, 10]

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Blanco
                Rectangle:
                    pos: self.pos
                    size: self.size
            ImageButton:
                source: app.get_image_path('casa.png')
                on_press: root.manager.current = 'home'
            ImageButton:
                source: app.get_image_path('armario.png')
                on_press: root.manager.current = 'wardrobe'
            ImageButton:
                source: app.get_image_path('regla.png')
                on_press: root.manager.current = 'mesure'
            ImageButton:
                source: app.get_image_path('usuario.png')
                on_press: root.manager.current = 'account'

<EditClothingScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 0.784, 0.902, 0.980, 1  # Fondo
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: '[b]Editar Prenda[/b]'
            markup: True
            color: 0, 0, 0, 1
            font_size: '32sp'
            size_hint_y: None
            height: '50dp'

        ScrollView:
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: [20, 20, 20, 20]
                spacing: 10

                TextInput:
                    id: edit_type
                    hint_text: 'Tipo de prenda'
                    size_hint_y: None
                    height: '40dp'
                    multiline: False
                    disabled: True

                TextInput:
                    id: edit_custom_name
                    hint_text: 'Nombre Personalizado'
                    size_hint_y: None
                    height: '40dp'
                    multiline: False

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: 300
                    spacing: 10

                    Image:
                        id: edit_image
                        size_hint: (None, None)
                        size: (335, 250)
                        allow_stretch: True
                    Button:
                        text: 'Subir Imagen'
                        size_hint_y: None
                        height: '40dp'
                        on_press: root.upload_image()

                BoxLayout:
                    id: edit_measurement_inputs
                    orientation: 'vertical'
                    spacing: 10
                    size_hint_y: None
                    height: self.minimum_height

                    TextInput:
                        id: edit_height
                        hint_text: 'Altura (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                    TextInput:
                        id: edit_chest_circumference
                        hint_text: 'Circunferencia del pecho (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                    TextInput:
                        id: edit_waist_circumference
                        hint_text: 'Circunferencia de la cintura (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                    TextInput:
                        id: edit_torso_length
                        hint_text: 'Largo del torso (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                    TextInput:
                        id: edit_leg_length
                        hint_text: 'Largo de la pierna (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                BoxLayout:
                    size_hint_y: None
                    height: '50dp'
                    spacing: 10

                    Button:
                        text: 'Guardar'
                        on_press: root.save_clothing_details()

                    Button:
                        text: 'Cancelar'
                        on_press: root.cancel_edit()
                Button:
                    text: 'Eliminar'
                    size_hint_y: None
                    height: '50dp'
                    background_color: (1, 0, 0, 1)  # Rojo
                    color: (1, 1, 1, 1)  # Texto blanco
                    on_press: root.delete_clothing()


<WardrobeDetailsScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba:  0.784, 0.902, 0.980, 1  # Fondo
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            orientation: 'vertical'
            padding: [20, 20, 20, 20]
            Label:
                text: '[b]Prendas del Armario[/b]'
                markup: True
                color: 0, 0, 0, 1
                font_size: '32sp'
                size_hint_y: None
                height: '50dp'

            ScrollView:
                GridLayout:
                    id: clothing_grid
                    cols: 4
                    spacing: [10, 10]
                    size_hint_y: None
                    height: self.minimum_height

        Button:
            text: 'Volver'
            size_hint_y: None
            height: '50dp'
            on_press: root.manager.current = 'wardrobe'

<MesureScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 0.784, 0.902, 0.980, 1  # Fondo
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: '[b]Gestión de Medidas[/b]'
            markup: True
            color: 0, 0, 0, 1
            font_size: '32sp'
            size_hint_y: None
            height: '50dp'

        ScrollView:
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: [20, 20, 20, 20]
                spacing: 10

                Spinner:
                    id: spinner_clothing
                    text: 'Seleccionar prenda'
                    values: ['Body', 'Buzos', 'Cubrepañales', 'Vestidos', 'Jesusitos', 'Peleles', 'Petos', 'Ranitas']
                    on_text: root.on_spinner_select(self.text)
                    size_hint_y: None
                    height: '50dp'

                Spinner:
                    id: wardrobe_spinner
                    text: 'Seleccione un armario'
                    size_hint_y: None
                    height: '50dp'

                TextInput:
                    id: custom_name
                    hint_text: 'Nombre Personalizado'
                    multiline: False
                    size_hint_y: None
                    height: '40dp'

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: 300
                    spacing: 10
                
                    Image:
                        id: image
                        size_hint: (None, None)
                        size: (335, 250)
                        allow_stretch: True
                    Button:
                        text: 'Subir Imagen'
                        size_hint_y: None
                        height: '40dp'
                        on_press: root.upload_image()
                        BoxLayout:
                            id: filechooser_layout
                            orientation: 'vertical'
                            size_hint_y: None
                            height: '0dp'
                            FileChooserListView:
                                on_selection: root.on_image_selected(self.selection)

                BoxLayout:
                    id: measurement_inputs
                    orientation: 'vertical'
                    spacing: 10
                    size_hint_y: None
                    height: self.minimum_height

                    TextInput:
                        id: height
                        hint_text: 'Altura (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                    TextInput:
                        id: chest_circumference
                        hint_text: 'Circunferencia del pecho (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                    TextInput:
                        id: waist_circumference
                        hint_text: 'Circunferencia de la cintura (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                    TextInput:
                        id: torso_length
                        hint_text: 'Largo del torso (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                    TextInput:
                        id: leg_length
                        hint_text: 'Largo de la pierna (cm)'
                        multiline: False
                        size_hint_y: None
                        height: '40dp'
                        disabled: True

                Button:
                    text: 'Guardar Medidas'
                    size_hint_y: None
                    height: '50dp'
                    on_press: root.save_measurements(spinner_clothing.text, custom_name.text, image.source, height.text, chest_circumference.text, waist_circumference.text, torso_length.text, leg_length.text)

        GridLayout:
            cols: 4
            rows: 1
            size_hint_y: None
            height: dp(50)
            padding: [10, 10, 10, 10]
            spacing: [10, 10]

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Blanco
                Rectangle:
                    pos: self.pos
                    size: self.size
            ImageButton:
                source: app.get_image_path('casa.png')
                on_press: root.manager.current = 'home'
            ImageButton:
                source: app.get_image_path('armario.png')
                on_press: root.manager.current = 'wardrobe'
            ImageButton:
                source: app.get_image_path('regla.png')
                on_press: root.manager.current = 'mesure'
            ImageButton:
                source: app.get_image_path('usuario.png')
                on_press: root.manager.current = 'account'


<Button@Button>:
    font_size: '24sp'
    markup: True
    color: 0, 0, 0, 1  # Color del texto
    background_normal: ''  # Eliminar la imagen de fondo predeterminada
    background_color: 1, 1, 1, 1  # Color de fondo por defecto (blanco)

<AccountScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        canvas.before:
            Color:
                rgba:  0.784, 0.902, 0.980, 1  # Blanco
            Rectangle:
                pos: self.pos
                size: self.size
        
        BoxLayout:
            orientation: 'vertical'
            padding: [20, 20, 20, 0]
            spacing: 20

            Button:
                text: '[b]Mi cuenta[/b]'
                background_color: (255/255, 255/255, 255/255, 1)
                on_press: root.display_account_info(root.manager.get_screen('login').ids.username.text)

            Button:
                text: '[b]Mi bebe[/b]'
                background_color: (255/255, 255/255, 255/255, 1)
                on_press: root.manager.current = 'baby_measurements'

            Button:
                text: '[b]Cambiar contraseña[/b]'
                background_color: (255/255, 255/255, 255/255, 1)
                on_press: root.manager.current = 'change_password'

            Button:
                text: '[b]Cerrar sesion[/b]'
                color: 1, 1, 1, 1
                background_color: (255/255, 0/255, 0/255, 1)
                on_press: app.get_running_app().stop()  # Llamar al método stop() para cerrar la app

        GridLayout:
            cols: 4
            rows: 1
            size_hint_y: None
            height: dp(50)
            padding: [10, 10, 10, 10]
            spacing: [10, 10]

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Blanco
                Rectangle:
                    pos: self.pos
                    size: self.size
            ImageButton:
                source: app.get_image_path('casa.png')
                on_press: root.manager.current = 'home'
            ImageButton:
                source: app.get_image_path('armario.png')
                on_press: root.manager.current = 'wardrobe'
            ImageButton:
                source: app.get_image_path('regla.png')
                on_press: root.manager.current = 'mesure'
            ImageButton:
                source: app.get_image_path('usuario.png')
                on_press: root.manager.current = 'account'
<ChangePasswordScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing:20


        canvas.before:
            Color:
                rgba:  0.784, 0.902, 0.980, 1  # Blanco
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: 'Cambiar Contraseña'
            font_size: '32sp'
            color: 0, 0, 0, 1

        TextInput:
            id: username
            hint_text: 'Nombre de usuario'
            multiline: False

        TextInput:
            id: old_password
            hint_text: 'Contraseña antigua'
            password: True
            multiline: False

        TextInput:
            id: new_password
            hint_text: 'Nueva contraseña'
            password: True
            multiline: False

        Button:
            text: 'Cambiar Contraseña'
            on_press: root.change_password(username.text, old_password.text, new_password.text)

        Button:
            text: 'Volver'
            on_press: root.manager.current = 'account'

<BabyMeasurementsScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 10
        canvas.before:
            Color:
                rgba:  0.784, 0.902, 0.980, 1  # Blanco
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: 'Medidas del Bebé'
            font_size: '32sp'
            color: 0, 0, 0, 1

        Spinner:
            id: spinner_name
            text: 'Seleccionar o Nuevo'
            values: []
            on_text: root.on_spinner_select(self.text)

        TextInput:
            id: new_name
            hint_text: 'Nuevo nombre'
            multiline: False
            disabled: True

        TextInput:
            id: height
            hint_text: 'Altura del bebé (cm)'
            multiline: False

        TextInput:
            id: chest_circumference
            hint_text: 'Circunferencia del pecho (cm)'
            multiline: False

        TextInput:
            id: waist_circumference
            hint_text: 'Circunferencia de la cintura (cm)'
            multiline: False

        TextInput:
            id: torso_length
            hint_text: 'Largo del torso (cm)'
            multiline: False

        TextInput:
            id: leg_length
            hint_text: 'Largo de la pierna (cm)'
            multiline: False

        Button:
            text: 'Guardar Medidas'
            on_press: root.save_measurements(spinner_name.text, new_name.text, height.text, chest_circumference.text, waist_circumference.text, torso_length.text, leg_length.text)

        Button:
            text: 'Volver'
            on_press: root.manager.current = 'account'






